DROP TABLE MEMBER;
DROP SEQUENCE MEMBERSEQ;

CREATE SEQUENCE MEMBERSEQ;
CREATE TABLE MEMBER (
"MEMBER_ID" VARCHAR2(50) PRIMARY KEY,
"MEMBER_PASSWORD" VARCHAR2(3500) NOT NULL,
"MEMBER_NAME" VARCHAR2(30) NOT NULL,
"MEMBER_GENDER" VARCHAR2(10) NOT NULL,
"MEMBER_BIRTHDAY" DATE NOT NULL,
"MEMBER_PHONE" VARCHAR2(100) UNIQUE NOT NULL,
"MEMBER_EMAIL" VARCHAR2(50),
"MEMBER_ENROLLDATE" DATE DEFAULT sysdate NOT NULL,
"MEMBER_GRADE" VARCHAR2(30) DEFAULT 'ROLE_USER' NOT NULL,
"ENABLED" NUMBER DEFAULT '1' NOT NULL,
"AUTHORITY" VARCHAR2(30) DEFAULT 'ROLE_USER' NOT NULL,
CONSTRAINT MEMBER_GENDER CHECK("MEMBER_GENDER" IN ('M','F')),
CONSTRAINT MEMBER_GRADE CHECK("MEMBER_GRADE" IN ('ROLE_ADMIN','ROLE_USER')),
CONSTRAINT MEMBER_ENABLED CHECK("ENABLED" IN ('1','0')),
CONSTRAINT MEMBER_AUTORITY CHECK("AUTHORITY" IN ('ROLE_ADMIN','ROLE_USER'))
);

INSERT INTO MEMBER VALUES (
    'admin', '$2a$10$.GVs2aKU34V0wtdxwdYQn.XnAo2KhQWlBy0Xu283nGOL6BTI7vj.i', '관리자', 'M', TO_DATE('1990-12-12 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), '01022223333', 'admin@mail.com', DEFAULT, 'ROLE_ADMIN', DEFAULT, 'ROLE_ADMIN'
);

commit;

DROP TABLE ADDRESS;
DROP SEQUENCE seq_address_no;
CREATE SEQUENCE seq_address_no;
CREATE TABLE ADDRESS (
    "ADDRESS_NO" NUMBER PRIMARY KEY,
    "MEMBER_ID" REFERENCES MEMBER("MEMBER_ID") ON DELETE CASCADE,
    "ADDRESS" VARCHAR2(255) NOT NULL,
    "ZIP_CODE" VARCHAR2(30) NOT NULL,
    "ADDRESS_LEVEL" VARCHAR2(20) NOT NULL
);

DROP TABLE CONNECT_MEMBER;

CREATE TABLE CONNECT_MEMBER (
    "MEMBER_ID" REFERENCES MEMBER("MEMBER_ID") ON DELETE CASCADE
    
);

DROP TABLE BOARD;
DROP SEQUENCE BOARDSEQ;

CREATE SEQUENCE BOARDSEQ;
CREATE TABLE BOARD(
"B_NO" NUMBER PRIMARY KEY,
"MEMBER_ID" REFERENCES MEMBER("MEMBER_ID") ON DELETE CASCADE,
"B_TITLE" VARCHAR2(255) NOT NULL,
"B_CONTENT" VARCHAR2(2000) NOT NULL,
"B_DATE" DATE NOT NULL,
"B_HITS" NUMBER NOT NULL
);

/* ANSWER */

DROP TABLE ANSWER;
DROP SEQUENCE ANSWERSEQ;

CREATE SEQUENCE ANSWERSEQ;
CREATE TABLE ANSWER(
A_NO NUMBER PRIMARY KEY,
B_NO NUMBER REFERENCES BOARD(B_NO) ON DELETE CASCADE,
"MEMBER_ID" REFERENCES MEMBER("MEMBER_ID") ON DELETE CASCADE,
A_CONTENT VARCHAR2(1000) NOT NULL,
A_DATE DATE NOT NULL,
A_EN VARCHAR2(2) NOT NULL,
A_PNO NUMBER NULL,
CONSTRAINT answer_en CHECK(A_EN IN ('Y','N'))
);


DROP TABLE CHATTING ;
DROP SEQUENCE chat_no_seq;
CREATE SEQUENCE chat_no_seq;
CREATE TABLE CHATTING (
    "CHAT_NO" NUMBER PRIMARY KEY,
    "MEMBER_ID" REFERENCES MEMBER("MEMBER_ID") ON DELETE CASCADE,
    "CHAT_CONTENT" VARCHAR2(500),
    "CHAT_DATE" DATE DEFAULT sysdate
);




